(window["webpackJsonpavalon-vote-tracker"]=window["webpackJsonpavalon-vote-tracker"]||[]).push([[0],{17:function(e,t,a){e.exports=a(28)},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(9),i=a.n(r),o=a(10),l=a(2),c=a(11),m=a(12),u=a(15),d=a(13),p=a(5),y=a(16),f=a(6),h=a(4),v=a(3),b=(a(27),function(e){var t=e.canStepBackward,a=e.inProgress,n=e.isReady,r=e.locked,i=e.onAddPlayer,o=e.onRemovePlayer,l=e.onLock,c=e.onUnlock,m=e.onReset,u=e.onStart,d=e.onStepBackward;return s.a.createElement("div",null,r?s.a.createElement("span",null,s.a.createElement("button",{className:"btn",onClick:c},s.a.createElement(v.a,{icon:"lock-open"})," unlock")):s.a.createElement("span",null,s.a.createElement("button",{className:"btn",onClick:l},s.a.createElement(v.a,{icon:"lock"})," lock"),"\xa0",a?s.a.createElement("span",null,s.a.createElement("button",{className:"btn",disabled:!t,onClick:d},s.a.createElement(v.a,{icon:"step-backward"})," step backward"),"\xa0"):s.a.createElement("span",null,s.a.createElement("button",{className:"btn",onClick:i},s.a.createElement(v.a,{icon:"plus"})," add player"),"\xa0",s.a.createElement("button",{className:"btn",onClick:o},s.a.createElement(v.a,{icon:"minus"})," remove player"),"\xa0",s.a.createElement("button",{className:"btn",disabled:!n,onClick:u},s.a.createElement(v.a,{icon:"play"})," start"),"\xa0"),s.a.createElement("button",{className:"btn",onClick:m},s.a.createElement(v.a,{icon:"redo"})," reset")))}),E=a(14),g=function(e){var t=e.name,a=e.onChange,r=Object(n.useState)(!1),i=Object(E.a)(r,2),o=i[0],l=i[1],c=Object(n.useRef)(null),m=Object(n.useRef)(""),u=Object(n.useCallback)((function(e){c.current&&!c.current.contains(e.target)&&l(!1)}),[l]);return Object(n.useEffect)((function(){if(o)return document.addEventListener("click",u),function(){document.removeEventListener("click",u)}}),[u,o]),Object(n.useEffect)((function(){o&&(m.current=t,c.current.focus())}),[o]),o?s.a.createElement("input",{className:"form-input",style:{maxWidth:"150px",margin:"auto"},value:t,ref:c,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){["Enter","Escape"].includes(e.key)&&("Escape"===e.key&&a(m.current),l(!1))}}):s.a.createElement("span",{onClick:function(e){return l(!0)}},t.length>=1?t:"<enter name>")},k=function(){return s.a.createElement("footer",{style:{padding:"20px",fontSize:"13px",textAlign:"center"}},"created by"," ",s.a.createElement("a",{href:"https://github.com/mwiens91/",style:{textDecoration:"none",color:"#0000EE"}},"Matt Wiens"))},P=function(e){var t=e.isReady;if(e.isInProgress)return null;var a="";return a=t?s.a.createElement("span",null,"click the button above to start"):s.a.createElement("span",null,"enter ",s.a.createElement("span",{style:{textDecoration:"underline"}},"unique")," player names"," ",s.a.createElement("span",{style:{textDecoration:"underline"}},"in the order of mission leader succession")," ","from left to right"),s.a.createElement("div",{style:{paddingTop:"30px",fontSize:"13px"}},a)};function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}f.b.add(h.a,h.b,h.c,h.d,h.e,h.f,h.g,h.h,h.i,h.j,h.k,h.l);var S={leader:0,missionNumber:1,selectionNumber:1,state:"in progress",approves:Array(5).fill(!0),onTeam:Array(5).fill(!1)},w={inProgress:!1,locked:!1,numPlayers:5,players:Array(5).fill(""),playersLocked:!1,missions:[S]},x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).minPlayers=5,a.maxPlayers=10,a.state=w,a.addPlayer=a.addPlayer.bind(Object(p.a)(a)),a.removePlayer=a.removePlayer.bind(Object(p.a)(a)),a}return Object(y.a)(t,e),Object(m.a)(t,[{key:"addPlayer",value:function(){this.state.numPlayers>=this.maxPlayers||this.setState({numPlayers:this.state.numPlayers+1,players:[].concat(Object(l.a)(this.state.players),[""]),missions:[O({},S,{approves:Array(this.state.numPlayers+1).fill(!0),onTeam:Array(this.state.numPlayers+1).fill(!1)})]})}},{key:"removePlayer",value:function(){this.state.numPlayers<=this.minPlayers||this.setState({numPlayers:this.state.numPlayers-1,players:this.state.players.slice(0,this.state.numPlayers-1),missions:[O({},S,{approves:Array(this.state.numPlayers-1).fill(!0),onTeam:Array(this.state.numPlayers-1).fill(!1)})]})}},{key:"modifyPlayerName",value:function(e,t){this.setState({players:[].concat(Object(l.a)(this.state.players.slice(0,e)),[t],Object(l.a)(this.state.players.slice(e+1)))})}},{key:"modifyMissionOnTeam",value:function(e,t,a){this.setState({missions:[].concat(Object(l.a)(this.state.missions.slice(0,e)),[O({},this.state.missions[e],{onTeam:[].concat(Object(l.a)(this.state.missions[e].onTeam.slice(0,t)),["true"===a],Object(l.a)(this.state.missions[e].onTeam.slice(t+1)))})],Object(l.a)(this.state.missions.slice(e+1)))})}},{key:"modifyMissionApproves",value:function(e,t,a){this.setState({missions:[].concat(Object(l.a)(this.state.missions.slice(0,e)),[O({},this.state.missions[e],{approves:[].concat(Object(l.a)(this.state.missions[e].approves.slice(0,t)),["true"===a],Object(l.a)(this.state.missions[e].approves.slice(t+1)))})],Object(l.a)(this.state.missions.slice(e+1)))})}},{key:"modifyMissionState",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.setState({missions:[].concat(Object(l.a)(this.state.missions.slice(0,e)),[O({},this.state.missions[e],{state:t})],Object(l.a)(this.state.missions.slice(e+1)))},a)}},{key:"addMission",value:function(){var e=this.state.missions[this.state.missions.length-1];if("in progress"===e.state)throw new Error("adding new mission while mission still in progress");"rejected"===e.state&&5===e.selectionNumber||this.state.missions.reduce((function(e,t){return"failed"===t.state?e+1:e}),0)>=3||this.state.missions.reduce((function(e,t){return"successful"===t.state?e+1:e}),0)>=3||this.setState({missions:[].concat(Object(l.a)(this.state.missions),[{leader:(e.leader+1)%this.state.numPlayers,missionNumber:"rejected"===e.state?e.missionNumber:e.missionNumber+1,selectionNumber:"rejected"===e.state?e.selectionNumber+1:1,state:"in progress",approves:Array(this.state.numPlayers).fill(!0),onTeam:Array(this.state.numPlayers).fill(!1)}])})}},{key:"removeCurrentMission",value:function(){this.setState({missions:[].concat(Object(l.a)(this.state.missions.slice(0,this.state.missions.length-2)),[O({},this.state.missions[this.state.missions.length-2],{state:"in progress"})])})}},{key:"isReadyToStart",value:function(){return this.state.players.every((function(e){return""!==e}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{style:{padding:"0 0.69em"}},s.a.createElement("h1",{style:{fontSize:"53px",marginTop:"0.6em"}},"Avalon vote tracker"),s.a.createElement(b,{canStepBackward:this.state.missions.length>=2,inProgress:this.state.inProgress,isReady:this.isReadyToStart(),locked:this.state.locked,onAddPlayer:this.addPlayer,onRemovePlayer:this.removePlayer,onLock:function(){return e.setState({locked:!0})},onUnlock:function(){return e.setState({locked:!1})},onReset:function(){return e.setState(w)},onStart:function(){return e.setState({inProgress:!0})},onStepBackward:function(){return e.removeCurrentMission()}}),s.a.createElement(P,{isReady:this.isReadyToStart(),isInProgress:this.state.inProgress})),s.a.createElement("div",{style:{flex:"auto"}},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{style:{height:"4em",width:"250px"}}),this.state.players.map((function(t,a){return s.a.createElement("th",{key:a.toString(),style:{width:"8em",height:"2em"}},s.a.createElement(g,{name:t,onChange:function(t){return e.modifyPlayerName(a,t)}}))})))),s.a.createElement("tbody",null,this.state.missions.map((function(t,a){return s.a.createElement("tr",{key:a.toString(),style:{backgroundColor:(n=t.state,"rejected"===n?"#ededed":"failed"===n?"#ffd6d6":"successful"===n?"#c2ffd0":"#deecf7")}},s.a.createElement("td",null,s.a.createElement("div",{style:{fontWeight:"bold"}},"mission ",t.missionNumber," > selection"," ",t.selectionNumber),s.a.createElement("div",null,s.a.createElement(v.a,{icon:"crown"})," ",e.state.players[t.leader]),s.a.createElement("div",{style:{height:"1em"}}),s.a.createElement("div",null,"in progress"===t.state?s.a.createElement("select",{className:"form-select",style:{maxWidth:"150px"},disabled:!e.state.inProgress,value:e.state.missions[a].state,onChange:function(t){e.modifyMissionState(a,t.currentTarget.value,e.addMission)}},s.a.createElement("option",{value:"in progress"},"in progress"),t.onTeam.reduce((function(e,t){return t?e+1:e}),0)>=2&&s.a.createElement(s.a.Fragment,null,t.approves.reduce((function(e,t){return t?e+1:e}),0)<=e.state.numPlayers/2?s.a.createElement("option",{value:"rejected"},"rejected"):s.a.createElement(s.a.Fragment,null,s.a.createElement("option",{value:"failed"},"failed"),s.a.createElement("option",{value:"successful"},"successful")))):s.a.createElement("span",{style:{fontWeight:"bold"}},t.state))),e.state.players.map((function(n,r){return s.a.createElement("td",{key:r.toString()+a.toString(),style:{textAlign:"center"}},"in progress"===t.state?s.a.createElement("span",null,s.a.createElement("div",{style:{maxWidth:"150px",margin:"auto",paddingBottom:"10px"}},s.a.createElement("select",{className:"form-select",value:e.state.missions[a].onTeam[r],onChange:function(t){return e.modifyMissionOnTeam(a,r,t.currentTarget.value)}},s.a.createElement("option",{value:!0},"on mission"),s.a.createElement("option",{value:!1},"off mission"))),s.a.createElement("div",{style:{maxWidth:"150px",margin:"auto"}},s.a.createElement("select",{className:"form-select",value:e.state.missions[a].approves[r],onChange:function(t){return e.modifyMissionApproves(a,r,t.currentTarget.value)}},s.a.createElement("option",{value:!0},"approve"),s.a.createElement("option",{value:!1},"reject")))):s.a.createElement("span",null,s.a.createElement("div",{style:{height:"2em"}},e.state.missions[a].onTeam[r]&&s.a.createElement(v.a,{icon:"user"})),s.a.createElement("div",{style:{height:"2em"}},e.state.missions[a].approves[r]?s.a.createElement(v.a,{icon:"check"}):s.a.createElement(v.a,{icon:"times"}))))})));var n}))))),s.a.createElement(k,null))}}]),t}(n.Component);i.a.render(s.a.createElement(x,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.0cf774b6.chunk.js.map