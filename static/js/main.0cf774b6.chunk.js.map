{"version":3,"sources":["ButtonMenu.js","EditablePlayerName.js","Footer.js","HelpMessage.js","App.js","index.js"],"names":["ButtonMenu","canStepBackward","inProgress","isReady","locked","onAddPlayer","onRemovePlayer","onLock","onUnlock","onReset","onStart","onStepBackward","className","onClick","icon","disabled","EditablePlayerName","name","onChange","useState","editing","setEditing","ref","useRef","originalNameRef","handleRootClick","useCallback","e","current","contains","target","useEffect","document","addEventListener","removeEventListener","focus","style","maxWidth","margin","value","currentTarget","onKeyDown","includes","key","length","Footer","padding","fontSize","textAlign","href","textDecoration","color","HelpMessage","isInProgress","helpMessage","paddingTop","library","add","faCheck","faCrown","faLock","faLockOpen","faMinus","faPlay","faPlus","faRedo","faStepBackward","faTimes","faUser","faUserSlash","INITIAL_MISSION_STATE","leader","missionNumber","selectionNumber","state","approves","Array","fill","onTeam","INITIAL_STATE","numPlayers","players","playersLocked","missions","App","props","minPlayers","maxPlayers","addPlayer","bind","removePlayer","this","setState","slice","playerIdx","newName","missionIdx","val","callback","previousMission","Error","reduce","count","currMission","every","marginTop","isReadyToStart","removeCurrentMission","flex","height","width","map","idx","toString","modifyPlayerName","mission","backgroundColor","missionState","fontWeight","modifyMissionState","addMission","_","paddingBottom","modifyMissionOnTeam","modifyMissionApproves","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.0cf774b6.chunk.js","sourcesContent":["import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nconst ButtonMenu = ({\n  canStepBackward,\n  inProgress,\n  isReady,\n  locked,\n  onAddPlayer,\n  onRemovePlayer,\n  onLock,\n  onUnlock,\n  onReset,\n  onStart,\n  onStepBackward,\n}) => (\n  <div>\n    {locked ? (\n      <span>\n        <button className=\"btn\" onClick={onUnlock}>\n          <FontAwesomeIcon icon=\"lock-open\" /> unlock\n        </button>\n      </span>\n    ) : (\n      <span>\n        <button className=\"btn\" onClick={onLock}>\n          <FontAwesomeIcon icon=\"lock\" /> lock\n        </button>\n        &nbsp;\n        {!inProgress ? (\n          <span>\n            <button className=\"btn\" onClick={onAddPlayer}>\n              <FontAwesomeIcon icon=\"plus\" /> add player\n            </button>\n            &nbsp;\n            <button className=\"btn\" onClick={onRemovePlayer}>\n              <FontAwesomeIcon icon=\"minus\" /> remove player\n            </button>\n            &nbsp;\n            <button className=\"btn\" disabled={!isReady} onClick={onStart}>\n              <FontAwesomeIcon icon=\"play\" /> start\n            </button>\n            &nbsp;\n          </span>\n        ) : (\n          <span>\n            <button\n              className=\"btn\"\n              disabled={!canStepBackward}\n              onClick={onStepBackward}\n            >\n              <FontAwesomeIcon icon=\"step-backward\" /> step backward\n            </button>\n            &nbsp;\n          </span>\n        )}\n        <button className=\"btn\" onClick={onReset}>\n          <FontAwesomeIcon icon=\"redo\" /> reset\n        </button>\n      </span>\n    )}\n  </div>\n);\n\nexport default ButtonMenu;\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\n\nconst EditablePlayerName = ({ name, onChange }) => {\n  const [editing, setEditing] = useState(false);\n  const ref = useRef(null);\n  const originalNameRef = useRef(\"\");\n\n  const handleRootClick = useCallback(\n    e => {\n      if (ref.current && !ref.current.contains(e.target)) {\n        setEditing(false);\n      }\n    },\n    [setEditing]\n  );\n\n  useEffect(() => {\n    if (!editing) {\n      return;\n    }\n\n    document.addEventListener(\"click\", handleRootClick);\n\n    return function cleanup() {\n      document.removeEventListener(\"click\", handleRootClick);\n    };\n  }, [handleRootClick, editing]);\n\n  useEffect(() => {\n    if (editing) {\n      originalNameRef.current = name;\n      ref.current.focus();\n    }\n  }, [editing]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (editing) {\n    return (\n      <input\n        className=\"form-input\"\n        style={{ maxWidth: \"150px\", margin: \"auto\" }}\n        value={name}\n        ref={ref}\n        onChange={e => onChange(e.currentTarget.value)}\n        onKeyDown={e => {\n          if ([\"Enter\", \"Escape\"].includes(e.key)) {\n            if (e.key === \"Escape\") {\n              onChange(originalNameRef.current);\n            }\n            setEditing(false);\n          }\n        }}\n      />\n    );\n  }\n  return (\n    <span onClick={e => setEditing(true)}>\n      {name.length >= 1 ? name : \"<enter name>\"}\n    </span>\n  );\n};\n\nexport default EditablePlayerName;\n","import React from \"react\";\n\nconst Footer = () => (\n  <footer\n    style={{\n      padding: \"20px\",\n      fontSize: \"13px\",\n      textAlign: \"center\",\n    }}\n  >\n    created by{\" \"}\n    <a\n      href=\"https://github.com/mwiens91/\"\n      style={{ textDecoration: \"none\", color: \"#0000EE\" }}\n    >\n      Matt Wiens\n    </a>\n  </footer>\n);\n\nexport default Footer;\n","import React from \"react\";\n\nconst HelpMessage = ({ isReady, isInProgress }) => {\n  if (isInProgress) {\n    return null;\n  }\n\n  let helpMessage = \"\";\n\n  if (!isReady) {\n    helpMessage = (\n      <span>\n        enter <span style={{ textDecoration: \"underline\" }}>unique</span> player\n        names{\" \"}\n        <span style={{ textDecoration: \"underline\" }}>\n          in the order of mission leader succession\n        </span>{\" \"}\n        from left to right\n      </span>\n    );\n  } else {\n    // Ready to start\n    helpMessage = <span>click the button above to start</span>;\n  }\n\n  return (\n    <div\n      style={{\n        paddingTop: \"30px\",\n        fontSize: \"13px\",\n      }}\n    >\n      {helpMessage}\n    </div>\n  );\n};\n\nexport default HelpMessage;\n","import React, { Component } from \"react\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faCheck,\n  faCrown,\n  faLock,\n  faLockOpen,\n  faMinus,\n  faPlay,\n  faPlus,\n  faRedo,\n  faStepBackward,\n  faTimes,\n  faUser,\n  faUserSlash,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport \"./App.css\";\nimport ButtonMenu from \"./ButtonMenu\";\nimport EditablePlayerName from \"./EditablePlayerName\";\nimport Footer from \"./Footer\";\nimport HelpMessage from \"./HelpMessage\";\n\n// Load Font Awesome icons\nlibrary.add(\n  faCheck,\n  faCrown,\n  faLock,\n  faLockOpen,\n  faMinus,\n  faPlay,\n  faPlus,\n  faRedo,\n  faStepBackward,\n  faTimes,\n  faUser,\n  faUserSlash\n);\n\nconst MISSION_IN_PROGRESS = \"in progress\";\nconst MISSION_REJECTED = \"rejected\";\nconst MISSION_FAILED = \"failed\";\nconst MISSION_SUCCESSFUL = \"successful\";\n\nconst getTableRowColor = missionState => {\n  if (missionState === MISSION_REJECTED) {\n    return \"#ededed\";\n  } else if (missionState === MISSION_FAILED) {\n    return \"#ffd6d6\";\n  } else if (missionState === MISSION_SUCCESSFUL) {\n    return \"#c2ffd0\";\n  }\n\n  return \"#deecf7\";\n};\n\nconst INITIAL_MISSION_STATE = {\n  leader: 0,\n  missionNumber: 1,\n  selectionNumber: 1,\n  state: MISSION_IN_PROGRESS,\n  approves: Array(5).fill(true),\n  onTeam: Array(5).fill(false),\n};\n\nconst INITIAL_STATE = {\n  inProgress: false,\n  locked: false,\n  numPlayers: 5,\n  players: Array(5).fill(\"\"),\n  playersLocked: false,\n  missions: [INITIAL_MISSION_STATE],\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.minPlayers = 5;\n    this.maxPlayers = 10;\n    this.state = INITIAL_STATE;\n\n    this.addPlayer = this.addPlayer.bind(this);\n    this.removePlayer = this.removePlayer.bind(this);\n  }\n\n  addPlayer() {\n    // Don't add a player if the player number is maxed out\n    if (this.state.numPlayers >= this.maxPlayers) {\n      return;\n    }\n\n    this.setState({\n      numPlayers: this.state.numPlayers + 1,\n      players: [...this.state.players, \"\"],\n      missions: [\n        {\n          ...INITIAL_MISSION_STATE,\n          approves: Array(this.state.numPlayers + 1).fill(true),\n          onTeam: Array(this.state.numPlayers + 1).fill(false),\n        },\n      ],\n    });\n  }\n\n  removePlayer() {\n    // Don't add a player if the player number is maxed out\n    if (this.state.numPlayers <= this.minPlayers) {\n      return;\n    }\n\n    this.setState({\n      numPlayers: this.state.numPlayers - 1,\n      players: this.state.players.slice(0, this.state.numPlayers - 1),\n      missions: [\n        {\n          ...INITIAL_MISSION_STATE,\n          approves: Array(this.state.numPlayers - 1).fill(true),\n          onTeam: Array(this.state.numPlayers - 1).fill(false),\n        },\n      ],\n    });\n  }\n\n  modifyPlayerName(playerIdx, newName) {\n    this.setState({\n      players: [\n        ...this.state.players.slice(0, playerIdx),\n        newName,\n        ...this.state.players.slice(playerIdx + 1),\n      ],\n    });\n  }\n\n  modifyMissionOnTeam(missionIdx, playerIdx, val) {\n    this.setState({\n      missions: [\n        ...this.state.missions.slice(0, missionIdx),\n        {\n          ...this.state.missions[missionIdx],\n          onTeam: [\n            ...this.state.missions[missionIdx].onTeam.slice(0, playerIdx),\n            val === \"true\" ? true : false,\n            ...this.state.missions[missionIdx].onTeam.slice(playerIdx + 1),\n          ],\n        },\n        ...this.state.missions.slice(missionIdx + 1),\n      ],\n    });\n  }\n\n  modifyMissionApproves(missionIdx, playerIdx, val) {\n    this.setState({\n      missions: [\n        ...this.state.missions.slice(0, missionIdx),\n        {\n          ...this.state.missions[missionIdx],\n          approves: [\n            ...this.state.missions[missionIdx].approves.slice(0, playerIdx),\n            val === \"true\" ? true : false,\n            ...this.state.missions[missionIdx].approves.slice(playerIdx + 1),\n          ],\n        },\n        ...this.state.missions.slice(missionIdx + 1),\n      ],\n    });\n  }\n\n  modifyMissionState(missionIdx, val, callback = null) {\n    this.setState(\n      {\n        missions: [\n          ...this.state.missions.slice(0, missionIdx),\n          {\n            ...this.state.missions[missionIdx],\n            state: val,\n          },\n          ...this.state.missions.slice(missionIdx + 1),\n        ],\n      },\n      callback\n    );\n  }\n\n  addMission() {\n    let previousMission = this.state.missions[this.state.missions.length - 1];\n\n    // We should never be here if the previous mission is still in\n    // progress\n    if (previousMission.state === MISSION_IN_PROGRESS) {\n      throw new Error(\"adding new mission while mission still in progress\");\n    }\n\n    // Don't allow the following:\n    // - over 5 rejected selections\n    // - more than 3 failed missions or 3 successful missions\n    if (\n      (previousMission.state === MISSION_REJECTED &&\n        previousMission.selectionNumber === 5) ||\n      this.state.missions.reduce(\n        (count, currMission) =>\n          currMission.state === MISSION_FAILED ? count + 1 : count,\n        0\n      ) >= 3 ||\n      this.state.missions.reduce(\n        (count, currMission) =>\n          currMission.state === MISSION_SUCCESSFUL ? count + 1 : count,\n        0\n      ) >= 3\n    ) {\n      return;\n    }\n\n    this.setState({\n      missions: [\n        ...this.state.missions,\n        {\n          leader: (previousMission.leader + 1) % this.state.numPlayers,\n          missionNumber:\n            previousMission.state === MISSION_REJECTED\n              ? previousMission.missionNumber\n              : previousMission.missionNumber + 1,\n          selectionNumber:\n            previousMission.state === MISSION_REJECTED\n              ? previousMission.selectionNumber + 1\n              : 1,\n          state: MISSION_IN_PROGRESS,\n          approves: Array(this.state.numPlayers).fill(true),\n          onTeam: Array(this.state.numPlayers).fill(false),\n        },\n      ],\n    });\n  }\n\n  removeCurrentMission() {\n    this.setState({\n      missions: [\n        ...this.state.missions.slice(0, this.state.missions.length - 2),\n        {\n          ...this.state.missions[this.state.missions.length - 2],\n          state: MISSION_IN_PROGRESS,\n        },\n      ],\n    });\n  }\n\n  isReadyToStart() {\n    return this.state.players.every(name => name !== \"\");\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div style={{ padding: \"0 0.69em\" }}>\n          <h1 style={{ fontSize: \"53px\", marginTop: \"0.6em\" }}>\n            Avalon vote tracker\n          </h1>\n\n          <ButtonMenu\n            canStepBackward={this.state.missions.length >= 2}\n            inProgress={this.state.inProgress}\n            isReady={this.isReadyToStart()}\n            locked={this.state.locked}\n            onAddPlayer={this.addPlayer}\n            onRemovePlayer={this.removePlayer}\n            onLock={() => this.setState({ locked: true })}\n            onUnlock={() => this.setState({ locked: false })}\n            onReset={() => this.setState(INITIAL_STATE)}\n            onStart={() => this.setState({ inProgress: true })}\n            onStepBackward={() => this.removeCurrentMission()}\n          />\n\n          <HelpMessage\n            isReady={this.isReadyToStart()}\n            isInProgress={this.state.inProgress}\n          />\n        </div>\n\n        <div style={{ flex: \"auto\" }}>\n          <table>\n            <thead>\n              <tr>\n                <th style={{ height: \"4em\", width: \"250px\" }}></th>\n                {this.state.players.map((name, idx) => (\n                  <th\n                    key={idx.toString()}\n                    style={{ width: \"8em\", height: \"2em\" }}\n                  >\n                    <EditablePlayerName\n                      name={name}\n                      onChange={newName => this.modifyPlayerName(idx, newName)}\n                    />\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.missions.map((mission, missionIdx) => (\n                <tr\n                  key={missionIdx.toString()}\n                  style={{ backgroundColor: getTableRowColor(mission.state) }}\n                >\n                  <td>\n                    <div style={{ fontWeight: \"bold\" }}>\n                      mission {mission.missionNumber} > selection{\" \"}\n                      {mission.selectionNumber}\n                    </div>\n                    <div>\n                      <FontAwesomeIcon icon=\"crown\" />{\" \"}\n                      {this.state.players[mission.leader]}\n                    </div>\n\n                    <div style={{ height: \"1em\" }}></div>\n                    <div>\n                      {mission.state === MISSION_IN_PROGRESS ? (\n                        <select\n                          className=\"form-select\"\n                          style={{ maxWidth: \"150px\" }}\n                          disabled={!this.state.inProgress}\n                          value={this.state.missions[missionIdx].state}\n                          onChange={e => {\n                            this.modifyMissionState(\n                              missionIdx,\n                              e.currentTarget.value,\n                              this.addMission\n                            );\n                          }}\n                        >\n                          <option value={MISSION_IN_PROGRESS}>\n                            {MISSION_IN_PROGRESS}\n                          </option>\n                          {mission.onTeam.reduce(\n                            (count, val) => (val ? count + 1 : count),\n                            0\n                          ) >= 2 && (\n                            <>\n                              {mission.approves.reduce(\n                                (count, val) => (val ? count + 1 : count),\n                                0\n                              ) <=\n                              this.state.numPlayers / 2 ? (\n                                <option value={MISSION_REJECTED}>\n                                  {MISSION_REJECTED}\n                                </option>\n                              ) : (\n                                <>\n                                  <option value={MISSION_FAILED}>\n                                    {MISSION_FAILED}\n                                  </option>\n                                  <option value={MISSION_SUCCESSFUL}>\n                                    {MISSION_SUCCESSFUL}\n                                  </option>\n                                </>\n                              )}\n                            </>\n                          )}\n                        </select>\n                      ) : (\n                        <span style={{ fontWeight: \"bold\" }}>\n                          {mission.state}\n                        </span>\n                      )}\n                    </div>\n                  </td>\n                  {this.state.players.map((_, playerIdx) => (\n                    <td\n                      key={playerIdx.toString() + missionIdx.toString()}\n                      style={{ textAlign: \"center\" }}\n                    >\n                      {mission.state === MISSION_IN_PROGRESS ? (\n                        <span>\n                          <div\n                            style={{\n                              maxWidth: \"150px\",\n                              margin: \"auto\",\n                              paddingBottom: \"10px\",\n                            }}\n                          >\n                            <select\n                              className=\"form-select\"\n                              value={\n                                this.state.missions[missionIdx].onTeam[\n                                  playerIdx\n                                ]\n                              }\n                              onChange={e =>\n                                this.modifyMissionOnTeam(\n                                  missionIdx,\n                                  playerIdx,\n                                  e.currentTarget.value\n                                )\n                              }\n                            >\n                              <option value={true}>on mission</option>\n                              <option value={false}>off mission</option>\n                            </select>\n                          </div>\n                          <div style={{ maxWidth: \"150px\", margin: \"auto\" }}>\n                            <select\n                              className=\"form-select\"\n                              value={\n                                this.state.missions[missionIdx].approves[\n                                  playerIdx\n                                ]\n                              }\n                              onChange={e =>\n                                this.modifyMissionApproves(\n                                  missionIdx,\n                                  playerIdx,\n                                  e.currentTarget.value\n                                )\n                              }\n                            >\n                              <option value={true}>approve</option>\n                              <option value={false}>reject</option>\n                            </select>\n                          </div>\n                        </span>\n                      ) : (\n                        <span>\n                          <div style={{ height: \"2em\" }}>\n                            {this.state.missions[missionIdx].onTeam[\n                              playerIdx\n                            ] && <FontAwesomeIcon icon=\"user\" />}\n                          </div>\n                          <div style={{ height: \"2em\" }}>\n                            {this.state.missions[missionIdx].approves[\n                              playerIdx\n                            ] ? (\n                              <FontAwesomeIcon icon=\"check\" />\n                            ) : (\n                              <FontAwesomeIcon icon=\"times\" />\n                            )}\n                          </div>\n                        </span>\n                      )}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}